exports.id=878,exports.ids=[878],exports.modules={1098:(e,t,a)=>{"use strict";a.d(t,{$G:()=>l,Ht:()=>c,jw:()=>o,q7:()=>w,qH:()=>u});var s=a(4999),n=a(5663),i=a(7462);let r="gdg-admin-session",d=process.env.SESSION_SECRET||"fallback-secret-key";async function o(e,t){return function(e){let t=Buffer.from(JSON.stringify(e)).toString("base64"),a=Buffer.from(d).toString("base64");return`${t}.${a}`}({adminId:e,username:t,loginTime:Date.now()})}async function c(){let e=await (0,s.UL)(),t=e.get(r)?.value;return t?function(e){try{let[t,a]=e.split(".");if(!t||!a)return null;let s=Buffer.from(d).toString("base64");if(a!==s)return null;let n=JSON.parse(Buffer.from(t,"base64").toString());if(Date.now()-n.loginTime>36e5)return null;return n}catch{return null}}(t):null}async function l(e){(await (0,s.UL)()).set(r,e,{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:3600})}async function w(){(await (0,s.UL)()).delete(r)}async function u(e,t){try{let a=await i.Ad.getByUsername(e);if(!a)return{success:!1};if(await n.Ay.compare(t,a.passwordHash))return{success:!0,adminId:a.id};return{success:!1}}catch(e){return console.error("Error verifying credentials:",e),{success:!1}}}},6487:()=>{},7462:(e,t,a)=>{"use strict";a.d(t,{Ad:()=>S,F_:()=>p,MI:()=>u,Rd:()=>f,dS:()=>g,s4:()=>w});var s=a(9021),n=a(3873),i=a(5663);let r=(0,n.join)(process.cwd(),"data"),d=(0,n.join)(r,"gdg.json");async function o(){try{await s.promises.mkdir(r,{recursive:!0})}catch(e){}}async function c(){if("phase-production-build"===process.env.NEXT_PHASE)return{speakers:[],sessions:[],events:[],reviews:[],admins:[]};await o();try{let e=await s.promises.readFile(d,"utf-8");return JSON.parse(e)}catch(e){return{speakers:[],sessions:[],events:[],reviews:[],admins:[]}}}async function l(e){"phase-production-build"!==process.env.NEXT_PHASE&&(await o(),await s.promises.writeFile(d,JSON.stringify(e,null,2)))}async function w(){let e=await c();if(0===e.admins.length){let t=process.env.ADMIN_USERNAME||"admin",a=process.env.ADMIN_PASSWORD||"admin123";process.env.ADMIN_USERNAME&&process.env.ADMIN_PASSWORD||console.warn("⚠️  WARNING: Using default admin credentials. Please set ADMIN_USERNAME and ADMIN_PASSWORD in .env.local");let s=await i.Ay.hash(a,10),n={id:Date.now().toString(),username:t,passwordHash:s,createdAt:new Date().toISOString()};e.admins.push(n),console.log(`Created admin user: ${t}`),console.log("✅ Admin user created. Speakers, sessions, and reviews can be added via the admin panel.")}else console.log("✅ Admin user already exists.");await l(e),console.log("Database initialization complete!")}let u={getAll:async()=>(await c()).speakers.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),getById:async e=>(await c()).speakers.find(t=>t.id===e),create:async e=>{let t=await c(),a=new Date().toISOString(),s={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9),rating:0,reviewCount:0,createdAt:a,updatedAt:a};return t.speakers.push(s),await l(t),s},update:async(e,t)=>{let a=await c(),s=a.speakers.findIndex(t=>t.id===e);-1!==s&&(a.speakers[s]={...a.speakers[s],...t,updatedAt:new Date().toISOString()},await l(a))},delete:async e=>{let t=await c();t.speakers=t.speakers.filter(t=>t.id!==e),t.sessions=t.sessions.map(t=>({...t,speakerIds:t.speakerIds.filter(t=>t!==e)})),await l(t)}},p={getAll:async()=>(await c()).sessions.sort((e,t)=>e.startTime.localeCompare(t.startTime)),getById:async e=>(await c()).sessions.find(t=>t.id===e),create:async e=>{let t=await c(),a=new Date().toISOString(),s={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9),createdAt:a,updatedAt:a};return t.sessions.push(s),await l(t),s},update:async(e,t)=>{let a=await c(),s=a.sessions.findIndex(t=>t.id===e);-1!==s&&(a.sessions[s]={...a.sessions[s],...t,updatedAt:new Date().toISOString()},await l(a))},delete:async e=>{let t=await c();t.sessions=t.sessions.filter(t=>t.id!==e),await l(t)}},g={get:async()=>(await c()).events[0],create:async e=>{let t=await c(),a=new Date().toISOString(),s={...e,id:Date.now().toString(),createdAt:a,updatedAt:a};return t.events=[s],await l(t),s},update:async(e,t)=>{let a=await c(),s=a.events.findIndex(t=>t.id===e);-1!==s&&(a.events[s]={...a.events[s],...t,updatedAt:new Date().toISOString()},await l(a))}},f={getAll:async()=>(await c()).reviews.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),getBySpeakerId:async e=>(await c()).reviews.filter(t=>t.speakerId===e).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),getBySessionId:async e=>(await c()).reviews.filter(t=>t.sessionId===e).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),create:async e=>{let t=await c(),a=new Date().toISOString(),s={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9),createdAt:a};if(t.reviews.push(s),e.speakerId){let a=t.reviews.filter(t=>t.speakerId===e.speakerId),s=a.reduce((e,t)=>e+t.rating,0)/a.length,n=t.speakers.findIndex(t=>t.id===e.speakerId);-1!==n&&(t.speakers[n].rating=Math.round(10*s)/10,t.speakers[n].reviewCount=a.length)}return await l(t),s},delete:async e=>{let t=await c(),a=t.reviews.find(t=>t.id===e);if(t.reviews=t.reviews.filter(t=>t.id!==e),a&&a.speakerId){let e=t.reviews.filter(e=>e.speakerId===a.speakerId),s=e.length>0?e.reduce((e,t)=>e+t.rating,0)/e.length:0,n=t.speakers.findIndex(e=>e.id===a.speakerId);-1!==n&&(t.speakers[n].rating=Math.round(10*s)/10,t.speakers[n].reviewCount=e.length)}await l(t)}},S={getByUsername:async e=>(await c()).admins.find(t=>t.username===e),create:async e=>{let t=await c(),a={...e,id:Date.now().toString(),createdAt:new Date().toISOString()};return t.admins.push(a),await l(t),a}}},8335:()=>{}};