(()=>{var e={};e.id=356,e.ids=[356],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1607:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>m,routeModule:()=>u,serverHooks:()=>g,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>w});var a={};s.r(a),s.d(a,{GET:()=>p,POST:()=>c});var r=s(6559),n=s(8088),i=s(7719),o=s(2190),d=s(7462);async function p(){try{let e=await d.MI.getAll();return o.NextResponse.json(e)}catch(e){return console.error("Error fetching speakers:",e),o.NextResponse.json({error:"Internal server error"},{status:500})}}async function c(e){try{let t=await e.json(),s=await d.MI.create(t);return o.NextResponse.json(s,{status:201})}catch(e){return console.error("Error creating speaker:",e),o.NextResponse.json({error:"Internal server error"},{status:500})}}let u=new r.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/speakers/route",pathname:"/api/speakers",filename:"route",bundlePath:"app/api/speakers/route"},resolvedPagePath:"/home/sthembiso/Documents/Personal Projects/gdg/app/api/speakers/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:l,workUnitAsyncStorage:w,serverHooks:g}=u;function m(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:w})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5511:e=>{"use strict";e.exports=require("crypto")},6487:()=>{},7462:(e,t,s)=>{"use strict";s.d(t,{Ad:()=>A,F_:()=>w,MI:()=>l,Rd:()=>m,dS:()=>g,s4:()=>u});var a=s(9021),r=s(3873),n=s(5663);let i=(0,r.join)(process.cwd(),"data"),o=(0,r.join)(i,"gdg.json");async function d(){try{await a.promises.mkdir(i,{recursive:!0})}catch(e){}}async function p(){if("phase-production-build"===process.env.NEXT_PHASE)return{speakers:[],sessions:[],events:[],reviews:[],admins:[]};await d();try{let e=await a.promises.readFile(o,"utf-8");return JSON.parse(e)}catch(e){return{speakers:[],sessions:[],events:[],reviews:[],admins:[]}}}async function c(e){"phase-production-build"!==process.env.NEXT_PHASE&&(await d(),await a.promises.writeFile(o,JSON.stringify(e,null,2)))}async function u(){let e=await p();if(0===e.admins.length){let t=process.env.ADMIN_USERNAME||"admin",s=process.env.ADMIN_PASSWORD||"admin123";process.env.ADMIN_USERNAME&&process.env.ADMIN_PASSWORD||console.warn("⚠️  WARNING: Using default admin credentials. Please set ADMIN_USERNAME and ADMIN_PASSWORD in .env.local");let a=await n.Ay.hash(s,10),r={id:Date.now().toString(),username:t,passwordHash:a,createdAt:new Date().toISOString()};e.admins.push(r),console.log(`Created admin user: ${t}`),console.log("✅ Admin user created. Speakers, sessions, and reviews can be added via the admin panel.")}else console.log("✅ Admin user already exists.");await c(e),console.log("Database initialization complete!")}let l={getAll:async()=>(await p()).speakers.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),getById:async e=>(await p()).speakers.find(t=>t.id===e),create:async e=>{let t=await p(),s=new Date().toISOString(),a={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9),rating:0,reviewCount:0,createdAt:s,updatedAt:s};return t.speakers.push(a),await c(t),a},update:async(e,t)=>{let s=await p(),a=s.speakers.findIndex(t=>t.id===e);-1!==a&&(s.speakers[a]={...s.speakers[a],...t,updatedAt:new Date().toISOString()},await c(s))},delete:async e=>{let t=await p();t.speakers=t.speakers.filter(t=>t.id!==e),t.sessions=t.sessions.map(t=>({...t,speakerIds:t.speakerIds.filter(t=>t!==e)})),await c(t)}},w={getAll:async()=>(await p()).sessions.sort((e,t)=>e.startTime.localeCompare(t.startTime)),getById:async e=>(await p()).sessions.find(t=>t.id===e),create:async e=>{let t=await p(),s=new Date().toISOString(),a={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9),createdAt:s,updatedAt:s};return t.sessions.push(a),await c(t),a},update:async(e,t)=>{let s=await p(),a=s.sessions.findIndex(t=>t.id===e);-1!==a&&(s.sessions[a]={...s.sessions[a],...t,updatedAt:new Date().toISOString()},await c(s))},delete:async e=>{let t=await p();t.sessions=t.sessions.filter(t=>t.id!==e),await c(t)}},g={get:async()=>(await p()).events[0],create:async e=>{let t=await p(),s=new Date().toISOString(),a={...e,id:Date.now().toString(),createdAt:s,updatedAt:s};return t.events=[a],await c(t),a},update:async(e,t)=>{let s=await p(),a=s.events.findIndex(t=>t.id===e);-1!==a&&(s.events[a]={...s.events[a],...t,updatedAt:new Date().toISOString()},await c(s))}},m={getAll:async()=>(await p()).reviews.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),getBySpeakerId:async e=>(await p()).reviews.filter(t=>t.speakerId===e).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),getBySessionId:async e=>(await p()).reviews.filter(t=>t.sessionId===e).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),create:async e=>{let t=await p(),s=new Date().toISOString(),a={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9),createdAt:s};if(t.reviews.push(a),e.speakerId){let s=t.reviews.filter(t=>t.speakerId===e.speakerId),a=s.reduce((e,t)=>e+t.rating,0)/s.length,r=t.speakers.findIndex(t=>t.id===e.speakerId);-1!==r&&(t.speakers[r].rating=Math.round(10*a)/10,t.speakers[r].reviewCount=s.length)}return await c(t),a},delete:async e=>{let t=await p(),s=t.reviews.find(t=>t.id===e);if(t.reviews=t.reviews.filter(t=>t.id!==e),s&&s.speakerId){let e=t.reviews.filter(e=>e.speakerId===s.speakerId),a=e.length>0?e.reduce((e,t)=>e+t.rating,0)/e.length:0,r=t.speakers.findIndex(e=>e.id===s.speakerId);-1!==r&&(t.speakers[r].rating=Math.round(10*a)/10,t.speakers[r].reviewCount=e.length)}await c(t)}},A={getByUsername:async e=>(await p()).admins.find(t=>t.username===e),create:async e=>{let t=await p(),s={...e,id:Date.now().toString(),createdAt:new Date().toISOString()};return t.admins.push(s),await c(t),s}}},8335:()=>{},9021:e=>{"use strict";e.exports=require("fs")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,12],()=>s(1607));module.exports=a})();